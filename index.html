<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Generator</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/print.css" media="print">
</head>
<body>
    <div class="app-container">
        <header>
            <h1>üìÑ Invoice Generator</h1>
            <div class="actions">
                <button id="new-invoice" class="btn">üÜï New</button>
                <button id="save-draft" class="btn">üíæ Save</button>
                <button id="load-draft" class="btn">üìÇ Load</button>
                <button id="preview-invoice" class="btn btn-primary">üëÅÔ∏è Preview</button>
                <button id="download-pdf" class="btn btn-success">üì• Download PDF</button>
            </div>
        </header>
        
        <main>
            <div class="invoice-form">
                <section class="company-details">
                    <h2>üè¢ Your Company</h2>
                    <div class="logo-upload">
                        <div id="logo-preview">
                            <img id="company-logo" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjZjhmOWZhIiBzdHJva2U9IiNkZWUyZTYiIHN0cm9rZS13aWR0aD0iMiIvPgo8dGV4dCB4PSI1MCIgeT0iNTUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzZjNzU3ZCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+TG9nbzwvdGV4dD4KPHN2Zz4=" alt="Company Logo">
                        </div>
                        <input type="file" id="logo-upload" accept="image/*">
                        <button id="upload-logo-btn" class="btn">üì∑ Upload Logo</button>
                    </div>
                    
                    <div class="form-group">
                        <label for="company-name">Company Name *</label>
                        <input type="text" id="company-name" placeholder="Your Company Name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="company-trn">TRN</label>
                        <input type="text" id="company-trn" placeholder="Tax Registration Number">
                    </div>
                    
                    <div class="form-group">
                        <label for="company-address">Address</label>
                        <textarea id="company-address" placeholder="Your company address" rows="3"></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="company-phone">Phone</label>
                            <input type="tel" id="company-phone" placeholder="(123) 456-7890">
                        </div>
                        <div class="form-group">
                            <label for="company-mobile">Mobile</label>
                            <input type="tel" id="company-mobile" placeholder="(123) 456-7890">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="company-website">Website</label>
                        <input type="url" id="company-website" placeholder="https://yourcompany.com">
                    </div>
                </section>
                
                <section class="client-details">
                    <h2>üë§ Bill To</h2>
                    <div class="form-group">
                        <label for="client-name">Client Name *</label>
                        <input type="text" id="client-name" placeholder="Client Company Name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="client-contact">Contact Person</label>
                        <input type="text" id="client-contact" placeholder="Contact Person Name">
                    </div>
                    
                    <div class="form-group">
                        <label for="client-address">Address</label>
                        <textarea id="client-address" placeholder="Client address" rows="3"></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="client-phone">Phone</label>
                            <input type="tel" id="client-phone" placeholder="(123) 456-7890">
                        </div>
                        <div class="form-group">
                            <label for="client-email">Email</label>
                            <input type="email" id="client-email" placeholder="client@example.com">
                        </div>
                    </div>
                </section>
                
                <section class="invoice-details">
                    <h2>üìã Invoice Details</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="invoice-number">Invoice # *</label>
                            <input type="text" id="invoice-number" placeholder="INV-001" required>
                        </div>
                        <div class="form-group">
                            <label for="invoice-date">Invoice Date *</label>
                            <input type="date" id="invoice-date" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="payment-due">Due Date</label>
                            <input type="date" id="payment-due">
                        </div>
                        <div class="form-group">
                            <label for="currency">Currency</label>
                            <select id="currency">
                                <option value="JMD">üáØüá≤ JMD (Jamaican Dollar)</option>
                                <option value="USD">üá∫üá∏ USD (US Dollar)</option>
                                <option value="EUR">üá™üá∫ EUR (Euro)</option>
                                <option value="GBP">üá¨üáß GBP (British Pound)</option>
                            </select>
                        </div>
                    </div>
                </section>
                
                <section class="invoice-items">
                    <h2>üõí Items & Services</h2>
                    <div class="items-container">
                        <table id="items-table">
                            <thead>
                                <tr>
                                    <th>Item/Code</th>
                                    <th>Description</th>
                                    <th>Qty</th>
                                    <th>Price</th>
                                    <th>Amount</th>
                                    <th>‚úñÔ∏è</th>
                                </tr>
                            </thead>
                            <tbody id="item-rows">
                                <!-- Items will be added here dynamically -->
                            </tbody>
                        </table>
                        
                        <button id="add-item" class="btn btn-primary">‚ûï Add Item</button>
                    </div>
                    
                    <div class="totals-section">
                        <div class="totals-row">
                            <span>Subtotal:</span>
                            <span id="subtotal">0.00</span>
                        </div>
                        <div class="totals-row discount-row">
                            <div class="discount-input">
                                <label for="discount">Discount:</label>
                                <input type="number" id="discount" min="0" value="0" step="0.01">
                                <select id="discount-type">
                                    <option value="fixed">$ Fixed</option>
                                    <option value="percentage">% Percent</option>
                                </select>
                            </div>
                            <span id="discount-amount">0.00</span>
                        </div>
                        <div class="totals-row total-row">
                            <span><strong>Total:</strong></span>
                            <span id="total-amount"><strong>0.00</strong></span>
                        </div>
                    </div>
                </section>
                
                <section class="payment-terms">
                    <h2>üí≥ Payment & Notes</h2>
                    <div class="form-group">
                        <label for="payment-methods">Payment Methods</label>
                        <textarea id="payment-methods" placeholder="Bank transfer, credit card, etc." rows="2"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="notes">Additional Notes</label>
                        <textarea id="notes" placeholder="Terms and conditions, thank you message, etc." rows="3"></textarea>
                    </div>
                </section>
            </div>
            
            <div id="invoice-preview" class="invoice-preview">
                <div class="preview-wrapper">
                    <div class="preview-header">
                        <h3>üìÑ Live Preview</h3>
                        <small>Updates automatically as you type</small>
                    </div>
                    <div id="preview-content" class="preview-content">
                        <div class="empty-preview">
                            <p>üëÜ Fill in the form to see your invoice preview</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <div id="loading-overlay" class="loading-overlay hidden">
            <div class="spinner"></div>
            <p>üìÑ Generating your PDF...</p>
        </div>
    </div>
    
    <!-- Template for new item row -->
    <template id="item-row-template">
        <tr class="item-row">
            <td>
                <input type="text" class="item-code" placeholder="Item code">
            </td>
            <td>
                <input type="text" class="item-description" placeholder="Description" required>
            </td>
            <td>
                <input type="number" class="item-quantity" min="1" value="1" step="1">
            </td>
            <td>
                <input type="number" class="item-price" min="0" step="0.01" value="0.00">
            </td>
            <td class="item-amount">0.00</td>
            <td>
                <button class="delete-item btn-danger" title="Remove item">√ó</button>
            </td>
        </tr>
    </template>

    <!-- Load JavaScript libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="js/app.js" type="module"></script>
</body>
</html>